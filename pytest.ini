[tool:pytest]
minversion = 7.0
addopts = 
    -ra
    -q
    --strict-markers
    --strict-config
    --html=reports/report.html
    --self-contained-html
    --json-report
    --json-report-file=reports/report.json
    --metadata Environment TEST_ENV
    --metadata Platform PLATFORM
    --metadata Browser BROWSER
    --cov=utils
    --cov=pages
    --cov-report=html:reports/coverage
    --cov-report=term-missing
    --cov-report=xml:reports/coverage.xml
    --junitxml=reports/junit.xml
    --tb=short
    --maxfail=10
    --durations=10
    --durations-min=1.0
    --timeout=300
    --timeout-method=thread
    --reruns=2
    --reruns-delay=1

testpaths = tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

markers =
    smoke: marks tests as smoke tests (deselect with '-m "not smoke"')
    regression: marks tests as regression tests
    e2e: marks tests as end-to-end tests
    api: marks tests as API tests
    unit: marks tests as unit tests
    integration: marks tests as integration tests
    slow: marks tests as slow running (deselect with '-m "not slow"')
    flaky: marks tests as potentially flaky
    critical: marks tests as critical functionality
    performance: marks tests as performance tests
    security: marks tests as security tests
    mobile: marks tests as mobile tests
    web: marks tests as web tests
    database: marks tests as database tests
    ui: marks tests as UI tests
    accessibility: marks tests as accessibility tests
    visual: marks tests as visual regression tests
    data_driven: marks tests as data-driven tests
    parallel: marks tests that can run in parallel
    sequential: marks tests that must run sequentially

# Environment variables
env =
    TEST_ENV=staging
    PLATFORM=desktop
    BROWSER=chrome
    HEADLESS=true
    IMPLICIT_WAIT=10
    EXPLICIT_WAIT=20
    PAGE_LOAD_TIMEOUT=30
    SCREENSHOT_ON_FAILURE=true
    VIDEO_RECORDING=false
    LOG_LEVEL=INFO
